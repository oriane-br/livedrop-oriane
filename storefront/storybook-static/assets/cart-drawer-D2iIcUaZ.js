import{j as e}from"./jsx-runtime-CDt2p4po.js";import{r as c}from"./index-GiUgBvb1.js";import{C as I}from"./cart-line-item-cGjWA6cl.js";import{B as h}from"./button-DmPhT7vC.js";function g(n){return n.toLocaleString("en-US",{style:"currency",currency:"USD"})}const L=({isOpen:n,onClose:a,items:i,onUpdateQuantity:b,onRemove:v,onCheckout:j})=>{const l=c.useRef(null),d=c.useRef(null),u=c.useRef(null);c.useEffect(()=>{var t,s;if(n){u.current=document.activeElement,setTimeout(()=>{var r;return(r=d.current)==null?void 0:r.focus()},10);const p=r=>{if(!l.current)return;const o=l.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(!o.length)return;const x=o[0],y=o[o.length-1];r.key==="Tab"&&(r.shiftKey&&document.activeElement===x?(r.preventDefault(),y.focus()):!r.shiftKey&&document.activeElement===y&&(r.preventDefault(),x.focus()))},f=r=>{r.key==="Escape"&&a()};return document.addEventListener("keydown",p),document.addEventListener("keydown",f),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keydown",f)}}else(s=(t=u.current)==null?void 0:t.focus)==null||s.call(t)},[n,a]);const w=t=>{t.target===t.currentTarget&&a()},m=i.reduce((t,s)=>t+s.product.price*s.quantity,0),k=m,C=n?"translate-x-0":"translate-x-full pointer-events-none",N=n?"opacity-100":"opacity-0 pointer-events-none",E=e.jsxs("div",{className:"flex flex-col items-center justify-center h-full py-12",children:[e.jsxs("svg",{width:"64",height:"64",className:"text-gray-300 mb-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[e.jsx("circle",{cx:"9",cy:"21",r:"1"}),e.jsx("circle",{cx:"20",cy:"21",r:"1"}),e.jsx("path",{d:"M1 1h3l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61l1.38-7.39H6",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("div",{className:"text-gray-700 font-medium mb-2",children:"Your cart is empty"}),e.jsx(h,{variant:"outline",size:"md",onClick:a,"aria-label":"Continue shopping",children:"Continue shopping"})]});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed inset-0 z-[1080] bg-black bg-opacity-40 transition-opacity duration-300 ${N}`,"aria-hidden":!n,onClick:w,tabIndex:-1}),e.jsxs("div",{ref:l,className:`fixed inset-y-0 right-0 z-[1100] w-full max-w-full sm:max-w-[400px] md:max-w-[500px] bg-white shadow-lg flex flex-col transition-transform duration-300 ease-in-out ${C}`,role:"dialog","aria-modal":"true","aria-labelledby":"cart-drawer-title",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-100",children:[e.jsx("h2",{id:"cart-drawer-title",className:"text-lg font-semibold",children:"Shopping Cart"}),e.jsx("button",{ref:d,onClick:a,"aria-label":"Close cart",className:"p-2 rounded hover:bg-gray-100 focus:outline-none focus:ring focus:ring-blue-400",tabIndex:n?0:-1,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-3 py-2",tabIndex:-1,children:i.length===0?E:e.jsx("div",{className:"space-y-4 min-h-[200px]",children:i.map(t=>e.jsx(I,{item:t,onUpdateQuantity:b,onRemove:v},t.product.id))})}),e.jsxs("div",{className:"border-t border-gray-200 p-4 bg-white sticky bottom-0 z-10",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium text-gray-700 mb-2",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:g(m)})]}),e.jsxs("div",{className:"flex justify-between text-base font-bold",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:g(k)})]}),e.jsx(h,{variant:"primary",size:"lg",className:"w-full mt-4",onClick:j,disabled:i.length===0,"aria-label":"Proceed to checkout",children:"Checkout"})]})]})]})};L.__docgenInfo={description:"",methods:[],displayName:"CartDrawer",props:{isOpen:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},items:{required:!0,tsType:{name:"Array",elements:[{name:"CartItem"}],raw:"CartItem[]"},description:""},onUpdateQuantity:{required:!0,tsType:{name:"signature",type:"function",raw:"(productId: string, quantity: number) => void",signature:{arguments:[{type:{name:"string"},name:"productId"},{type:{name:"number"},name:"quantity"}],return:{name:"void"}}},description:""},onRemove:{required:!0,tsType:{name:"signature",type:"function",raw:"(productId: string) => void",signature:{arguments:[{type:{name:"string"},name:"productId"}],return:{name:"void"}}},description:""},onCheckout:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};export{L as C};
